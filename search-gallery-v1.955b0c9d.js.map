{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aCAAC,EAAAD,EAAA,S,2BACME,SAEC,MAAMC,EASXC,cACE,MAAMC,EAAe,IAAIC,gBAAgB,CACvCC,IAAKJ,EAAUK,QACfC,EAAGC,KAAKC,YACRC,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAAU,GACVC,KAAMN,KAAKM,OAGPC,EAAY,GAAGd,EAAUe,YAAYb,IAE3C,MAAgC,KAA5BK,KAAKC,YAAYQ,QACnBpB,EAAAqB,OAAOC,QAAQ,oCACRC,QAAQC,OAAO,mBAGjBC,EACJC,IAAIR,EAAW,CACdS,eAAgBC,GAAoB,KAAVA,IAE3BC,OAAMC,GAAKC,QAAQC,IAAIF,I,CAI2BG,gBACrDtB,KAAKM,MAAQ,C,CAIfiB,YACEvB,KAAKM,KAAO,C,CAGVkB,YACF,OAAOxB,KAAKC,W,CAGVuB,UAAMC,GACRzB,KAAKwB,MAAQC,C,CA7CfC,cACE1B,KAAKC,YAAc,GACnBD,KAAKM,KAAO,C,EALdqB,EAAApC,EAAA,CADWE,EACJ,UAAU,sCACjBkC,EAAApC,EAAA,CAFWE,EAEJ,WAAW,4B,iBDMpB,MAAMmC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBAInCC,YAAaF,SAASC,cAAc,eAGhCE,EAAe,IAAIN,EAAAO,GAAJ,CAAmB,aAAc,CACpDC,aAAc,MACdC,aAAc,IACdC,YAAY,IAGRC,EAAe,IAAI7C,EAiDzB,SAAS8C,IACPD,EACG5C,cACA8C,MAAK,EAACC,KAAEA,MACPH,EAAahB,gBACbF,QAAQC,IACN,iBAAiBiB,EAAahC,KAAO,iBACnCgC,EAAahC,SAIjB,EAAAoC,EAAAC,gBAAeF,EAAKG,OAEpB,EAAAF,EAAAG,uBAAsBJ,EAAKK,YAE3B,EAAAJ,EAAAK,oBAEAd,EAAae,SAAS,IAEvB9B,OAAM+B,GAAS7B,QAAQC,IAAI4B,I,CAlEhCrB,EAAKI,YAAYkB,MAAMC,QAAU,OACjCvB,EAAKC,WAAWuB,iBAAiB,UAEjC,SAA4BjC,GAC1BA,EAAEkC,iBAGFzB,EAAKI,YAAYkB,MAAMC,QAAU,OAEjCb,EAAarC,YAAckB,EAAEmC,cAAcC,SAAStD,YAAYuD,MAChElB,EAAaf,YAEbe,EACG5C,cACA8C,MAAK,EAACC,KAAEA,MACY,IAAfA,EAAKgB,OAOTpE,EAAAqB,OAAOgD,QAAQ,oBAAoBjB,EAAKK,qBAExCR,EAAahB,gBAEbF,QAAQC,IACN,gCACEiB,EAAarC,6CACmBwC,EAAKgB,wBACrCnB,EAAahC,KAAO,iBACNgC,EAAahC,SAG/B,EAAAoC,EAAAiB,oBACA,EAAAjB,EAAAC,gBAAeF,EAAKG,MAEpBX,EAAae,UAEbpB,EAAKI,YAAYkB,MAAMC,QAAU,QACjCvB,EAAKI,YAAYoB,iBAAiB,QAASb,IAE3C,EAAAG,EAAAG,uBAAsBJ,EAAKK,YA1BzBzD,EAAAqB,OAAOkD,QACL,2EAyBiC,IAEtC1C,OAAM+B,GAAS7B,QAAQC,IAAI4B,I","sources":["src/js/search-gallery-v1.js","src/js/search-api-v1.js"],"sourcesContent":["import { Notify } from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { SearchAPI } from './search-api-v1';\nimport {\n  showImgGallery,\n  clearImgGallery,\n  checkElementsQuantity,\n  adjustPageScroll,\n} from './ui-gallery';\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  //   searchInput: document.querySelector('[name=\"searchQuery\"]'),\n  //   submitBtn: document.querySelector('button[type=\"submit\"]'),\n  //   gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst galleryModal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  scrollZoom: false,\n});\n\nconst newSearchAPI = new SearchAPI();\n\nrefs.loadMoreBtn.style.display = 'none';\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\n\nfunction onSearchFormSubmit(e) {\n  e.preventDefault();\n\n  // ТЗ: \"При повторному сабміті форми кнопка спочатку ховається, а після запиту знову відображається.\"\n  refs.loadMoreBtn.style.display = 'none';\n\n  newSearchAPI.searchQuery = e.currentTarget.elements.searchQuery.value;\n  newSearchAPI.resetPage();\n\n  newSearchAPI\n    .fetchImages()\n    .then(({ data }) => {\n      if (data.total === 0) {\n        Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n\n      Notify.success(`Hooray! We found ${data.totalHits} images.`);\n\n      newSearchAPI.incrementPage();\n\n      console.log(\n        `NEW SEARCH...\\nSearch query: ${\n          newSearchAPI.searchQuery\n        }\\nQuantity of found elements:  ${data.total}\\nCurrent page: ${\n          newSearchAPI.page - 1\n        }\\nNext page: ${newSearchAPI.page}`\n      );\n\n      clearImgGallery();\n      showImgGallery(data.hits);\n\n      galleryModal.refresh();\n\n      refs.loadMoreBtn.style.display = 'block';\n      refs.loadMoreBtn.addEventListener('click', onLoadMore);\n\n      checkElementsQuantity(data.totalHits);\n    })\n    .catch(error => console.log(error));\n}\n\nfunction onLoadMore() {\n  newSearchAPI\n    .fetchImages()\n    .then(({ data }) => {\n      newSearchAPI.incrementPage();\n      console.log(\n        `Current page: ${newSearchAPI.page - 1}\\nNext page: ${\n          newSearchAPI.page\n        }`\n      );\n\n      showImgGallery(data.hits);\n\n      checkElementsQuantity(data.totalHits);\n\n      adjustPageScroll();\n\n      galleryModal.refresh();\n    })\n    .catch(error => console.log(error));\n}\n","import { Notify } from 'notiflix';\nconst axios = require('axios').default;\n\nexport class SearchAPI {\n  static API_KEY = '34194701-2813288863e2fdf221136bb42';\n  static BASE_URL = 'https://pixabay.com/api/';\n\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImages() {\n    const searchParams = new URLSearchParams({\n      key: SearchAPI.API_KEY,\n      q: this.searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n      page: this.page,\n    });\n\n    const searchURL = `${SearchAPI.BASE_URL}?${searchParams}`;\n\n    if (this.searchQuery.trim() === '') {\n      Notify.warning('Please, enter your search query!');\n      return Promise.reject('Invalid query!');\n    }\n\n    return axios\n      .get(searchURL, {\n        validateStatus: status => status != 404,\n      })\n      .catch(e => console.log(e));\n  }\n\n  // Збільшуємо значення сторінки для наступного пошукового запиту:\n  incrementPage() {\n    this.page += 1;\n  }\n\n  // Скидуємо значення сторінки до дефолтного при кожному новому сабміті пошукової форми:\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.query = newQuery;\n  }\n}\n"],"names":["$7Y9D8","parcelRequire","$iJYdK","default","$b13b2c7c34bfb103$export$6d4af6dcbab2e7c5","fetchImages","searchParams","URLSearchParams","key","API_KEY","q","this","searchQuery","image_type","orientation","safesearch","per_page","page","searchURL","BASE_URL","trim","Notify","warning","Promise","reject","$b13b2c7c34bfb103$require$axios","get","validateStatus","status","catch","e","console","log","incrementPage","resetPage","query","newQuery","constructor","$parcel$interopDefault","$697f423c110b5453$var$refs","searchForm","document","querySelector","loadMoreBtn","$697f423c110b5453$var$galleryModal","$fZKcF","captionsData","captionDelay","scrollZoom","$697f423c110b5453$var$newSearchAPI","$697f423c110b5453$var$onLoadMore","then","data","$m2GY9","showImgGallery","hits","checkElementsQuantity","totalHits","adjustPageScroll","refresh","error","style","display","addEventListener","preventDefault","currentTarget","elements","value","total","success","clearImgGallery","failure"],"version":3,"file":"search-gallery-v1.955b0c9d.js.map"}